@{
    ViewBag.Title = "Home - Book Reader";
}

<section class="home-hero">
    <div class="hero-content">
        <h1>Explore a Vast Library of Books and Start Your Reading Journey</h1>
        <p>Curated collection of programming, sci-fi, literature and more to meet all your reading needs</p>
        <a href="@Url.Action("Index", "Books")" class="btn hero-btn">Browse Books</a>
    </div>
</section>

<section class="home-features">
    <div class="container">
        <h2>Platform Features</h2>
        <div class="features-grid">
            <div class="feature-card">
                <h3>Extensive Book Collection</h3>
                <p>Handpicked premium books covering programming, sci-fi, literature, history and more categories</p>
            </div>
            <div class="feature-card">
                <h3>Convenient Search</h3>
                <p>Search by title, author or category to quickly find the books you want</p>
            </div>
            <div class="feature-card">
                <h3>Multiple Sorting Options</h3>
                <p>Sort by title, price or publication year to meet personalized browsing needs</p>
            </div>
            <div class="feature-card">
                <h3>Comfortable Reading Experience</h3>
                <p>Clean and intuitive reading interface for an optimal reading experience</p>
            </div>
        </div>
    </div>
</section>

<section class="home-recommended">
    <div class="container">
        <h2>Recommended Books</h2>
        <div class="recommended-books">
            <!-- Core Fix: Add null check -->
            @{
                // Safe cast to avoid null reference exception
                var recommendedBooks = ViewBag.RecommendedBooks as List<ass2_BookReader.Models.Book>;
                if (recommendedBooks != null && recommendedBooks.Any())
                {
                    foreach (var book in recommendedBooks)
                    {
                        <div class="recommended-book-card">
                            <img src="~/Images/@book.CoverImage" alt="@book.Title">
                            <h3><a href="@Url.Action("Detail", "Books", new { id = book.Id })">@book.Title</a></h3>
                            <p>@book.Author</p>
                            <p class="price">¥@book.Price.ToString("F2")</p>
                        </div>
                    }
                }
                else
                {
                    <!-- Friendly prompt when no data is available -->
                    <div class="no-recommended">
                        <p>No recommended books at this time. <a href="@Url.Action("Index", "Books")">Click to view all books</a></p>
                    </div>
                }
            }
        </div>
    </div>
</section>